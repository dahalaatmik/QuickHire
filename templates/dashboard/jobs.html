{% extends 'dashboard/base_dashboard.html' %}

{% block title %}Job Postings{% endblock %}
{% block breadcrumb %}Job Postings{% endblock %}
{% block topbar_actions %}
<button class="btn-outline-sm" id="new-job-btn"><i data-feather="plus"></i> New Job</button>
{% endblock %}

{% block page_content %}
<!-- Stats row specific to jobs -->
<div class="stats-grid">
    <div class="stat-card">
        <span class="stat-icon"><i data-feather="briefcase"></i></span>
        <div class="stat-label">Total Postings</div>
        <div class="stat-value">24</div>
        <div class="stat-change">↑ 4 this month</div>
    </div>
    <div class="stat-card green">
        <span class="stat-icon"><i data-feather="check-circle"></i></span>
        <div class="stat-label">Open Now</div>
        <div class="stat-value">12</div>
        <div class="stat-change">Active & accepting</div>
    </div>
    <div class="stat-card amber">
        <span class="stat-icon"><i data-feather="clock"></i></span>
        <div class="stat-label">Avg Time to Fill</div>
        <div class="stat-value">18d</div>
        <div class="stat-change down">↓ 3d vs last month</div>
    </div>
    <div class="stat-card red">
        <span class="stat-icon"><i data-feather="alert-circle"></i></span>
        <div class="stat-label">Closing Soon</div>
        <div class="stat-value">3</div>
        <div class="stat-change down">Within 48 hours</div>
    </div>
</div>

<!-- Filter / Search bar -->
<div class="section-heading">
    <h2>All Postings</h2>
    <div style="display:flex;gap:var(--spacing-sm);align-items:center;flex-wrap:wrap;">
        <div class="search-box">
            <span class="search-icon"><i data-feather="search" style="width:14px;height:14px;"></i></span>
            <input type="text" placeholder="Search jobs…" id="jobs-search">
        </div>
        <select class="settings-input" id="jobs-dept-filter" style="width:160px;">
            <option value="all">All Departments</option>
            <option value="eng">Engineering</option>
            <option value="product">Product</option>
            <option value="design">Design</option>
            <option value="sales">Sales</option>
            <option value="hr">HR</option>
        </select>
        <select class="settings-input" id="jobs-status-filter" style="width:140px;">
            <option value="all">All Statuses</option>
            <option value="open">Open</option>
            <option value="closed">Closed</option>
            <option value="draft">Draft</option>
        </select>
    </div>
</div>

<!-- Jobs Table -->
<div class="data-table-wrap">
    <table>
        <thead><tr>
            <th>Job Title</th>
            <th>Department</th>
            <th>Location</th>
            <th>Candidates</th>
            <th>Posted</th>
            <th>Status</th>
        </tr></thead>
        <tbody id="jobs-tbody"></tbody>
    </table>
</div>
{% endblock %}

{% block modals %}
<!-- New Job Modal -->
<div id="new-job-modal" class="modal">
    <div class="modal-backdrop" id="njm-backdrop"></div>
    <div class="modal-content" style="max-width:560px;">
        <div class="modal-header">
            <h2 class="modal-title">Create New Job Posting</h2>
            <button class="modal-close" id="njm-close"><i data-feather="x"></i></button>
        </div>
        <div class="modal-body">
            <div class="form-group"><label>Job Title</label><input type="text" id="njm-title" placeholder="e.g. Senior Backend Developer"></div>
            <div style="display:grid;grid-template-columns:1fr 1fr;gap:var(--spacing-md);">
                <div class="form-group"><label>Department</label>
                    <select class="settings-input" style="width:100%;" id="njm-dept">
                        <option>Engineering</option><option>Product</option><option>Design</option><option>Sales</option><option>HR</option>
                    </select>
                </div>
                <div class="form-group"><label>Location</label><input type="text" id="njm-location" placeholder="e.g. Remote / Sydney"></div>
            </div>
            <div style="display:grid;grid-template-columns:1fr 1fr;gap:var(--spacing-md);">
                <div class="form-group"><label>Salary Min (AUD)</label><input type="number" id="njm-sal-min" placeholder="100000"></div>
                <div class="form-group"><label>Salary Max (AUD)</label><input type="number" id="njm-sal-max" placeholder="160000"></div>
            </div>
            <div class="form-group"><label>Description</label><textarea id="njm-desc" rows="4" placeholder="Describe the role, responsibilities…"></textarea></div>
            <div class="form-group"><label>Required Skills (comma separated)</label><input type="text" id="njm-skills" placeholder="React, TypeScript, Node.js"></div>
        </div>
        <div class="modal-footer">
            <button class="btn-outline" id="njm-cancel">Cancel</button>
            <button class="btn-primary" id="njm-submit"><i data-feather="check"></i> Create Posting</button>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/jobs.js') }}"></script>
{% endblock %}
